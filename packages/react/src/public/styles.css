@layer split-ui, split-ui-theme;

@layer split-ui {
  /* Define custom properties as non-inheriting to avoid inheritance bomb
     when using CSS containment */
  @property --split-ui-flex {
    syntax: "*";
    inherits: false;
    initial-value: 1;
  }

  @property --split-ui-min-size {
    syntax: "<length-percentage>";
    inherits: false;
    initial-value: 0;
  }

  @property --split-ui-max-size {
    syntax: "*";
    inherits: false;
    initial-value: none;
  }

  @property --split-ui-horizontal {
    syntax: "<number>";
    inherits: false;
    initial-value: 1;
  }

  @property --split-ui-vertical {
    syntax: "<number>";
    inherits: false;
    initial-value: 0;
  }

  @property --split-ui-resizer-size {
    syntax: "<length>";
    inherits: false;
    initial-value: 6px;
  }

  .split-ui-panel {
    position: relative;
    overflow: hidden;
    box-sizing: border-box;
    /* Optimize layout performance - contain layout calculations within panel
       Safe to use with @property inherits: false */
    contain: layout style;

    .split-ui-panel-group > & {
      flex: var(--split-ui-flex, 1);
      align-items: stretch;
    }

    &.split-ui-panel-group {
      display: flex;

      width: 100%;
      height: 100%;

      /* Only top-level panels should stretch to fill the container */
      & > .split-ui-panel-group {
        width: auto;
        height: auto;
      }

      /* Orientation-based custom properties for calc() usage */
      &.split-ui-horizontal {
        --split-ui-horizontal: 1;
        --split-ui-vertical: 0;
      }

      &.split-ui-vertical {
        --split-ui-horizontal: 0;
        --split-ui-vertical: 1;
      }
    }

    .split-ui-horizontal > & {
      min-width: var(--split-ui-min-size, 0);
      max-width: var(--split-ui-max-size, none);
      min-height: 0;
    }

    .split-ui-vertical > & {
      min-height: var(--split-ui-min-size, 0);
      max-height: var(--split-ui-max-size, none);
      min-width: 0;
    }
  }

  .split-ui-panel-group {
    display: flex;
    width: 100%;
    height: 100%;

    /* Only top-level panels should stretch to fill the container */
    & > .split-ui-panel-group {
      width: auto;
      height: auto;
    }

    /* Orientation-based custom properties for calc() usage */
    &.split-ui-horizontal {
      --split-ui-horizontal: 1;
      --split-ui-vertical: 0;
    }

    &.split-ui-vertical {
      --split-ui-horizontal: 0;
      --split-ui-vertical: 1;
    }
  }

  .split-ui-resizer {
    --split-ui-resizer-size: 6px;
    flex-shrink: 0;
    /* Optimize resizer rendering - it doesn't contain other layout
       Safe to use with @property inherits: false */
    contain: layout style paint;

    .split-ui-horizontal > & {
      cursor: ew-resize;
      width: var(--split-ui-resizer-size);
      touch-action: pan-y;
    }

    .split-ui-vertical > & {
      cursor: ns-resize;
      height: var(--split-ui-resizer-size);
      touch-action: pan-x;
    }
  }

  /* Resize state classes */
  .split-ui-resizing {
    user-select: none;
    touch-action: none;

    & iframe {
      pointer-events: none;
    }

    &.split-ui-horizontal {
      cursor: ew-resize;
      &.split-ui-constrained-min {
        cursor: e-resize;
        [dir='rtl'] & {
          cursor: w-resize;
        }
      }
      &.split-ui-constrained-max {
        cursor: w-resize;
        [dir='rtl'] & {
          cursor: e-resize;
        }
      }
    }

    &.split-ui-vertical {
      cursor: ns-resize;
      &.split-ui-constrained-min {
        cursor: s-resize;
      }
      &.split-ui-constrained-max {
        cursor: n-resize;
      }
    }
  }
}
